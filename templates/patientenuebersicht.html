{% extends "base.html" %}

{% block content %}
<h2>Patientendatenübersicht</h2>

<div class="panel panel-default">
  <div class="panel-heading">
    <strong>{{ patient.Name }}</strong> (ID: {{ patient.patienten_id }})
  </div>

<div class = "row">
  <div class="col-md-6">
    <p><strong>Name:</strong> {{ patient.Name }}</p>
    <p><strong>Geburtsdatum:</strong> {{ patient.Geburtsdatum }}</p>
    <p><strong>Geschlecht:</strong> {{ patient.Geschlecht }}</p>
    <p><strong>Gewicht:</strong> {{ patient.Gewicht }} kg</p>
    <p><strong>Versicherungsnummer:</strong> {{ patient.Versicherungsnummer }}</p>
  </div>
  
  <div class="col-md-6">
    <p><strong>Allergien:</strong>
      {% if allergien and allergien|length > 0 %}
        {{ allergien | map(attribute="Name") | join(", ") }}
      {% else %}
        Keine
      {% endif %}
    </p>

    <p><strong>Ernährungspräferenzen:</strong>
      {% if prefs and prefs|length > 0 %}
       {{ prefs | map(attribute="Name") | join(", ") }}
     {% else %}
       Keine
     {% endif %}
    </p>

    <p><strong>Medikamente:</strong>
      {% if meds and meds|length > 0 %}
        {{ meds | map(attribute="Name") | join(", ") }}
      {% else %}
        Keine
      {% endif %}
    </p>
  </div>
</div>

<div class="btn-group" role="group" style="margin-bottom: 15px;">
  <a class="btn btn-default" href="{{ url_for('patient') }}">← Zur Patientenliste</a>
</div>

<hr>

<h3>Bearbeiten</h3>
<p>Wähle aus, was du für diese Person bearbeiten möchtest:</p>

<div class="list-group">
  <a class="list-group-item" href="{{ url_for('allergien', patienten_id=patient.patienten_id) }}">
    Allergien bearbeiten
  </a>
  <a class="list-group-item" href="{{ url_for('ernaehrungspraeferenzen', patienten_id=patient.patienten_id) }}">
    Ernährungspräferenzen bearbeiten
  </a>
  <a class="list-group-item" href="{{ url_for('medikamente', patienten_id=patient.patienten_id) }}">
    Medikamente bearbeiten
  </a>
  <a class="list-group-item" href="{{ url_for('gerichte', patienten_id=patient.patienten_id) }}">
    Gerichte auswählen / filtern
  </a>
  <a class="list-group-item" href="{{ url_for('ernaehrungsplan', patienten_id=patient.patienten_id) }}">
    Ernährungsplan ansehen
  </a>
</div>

<div class="btn-group" role="group" style="margin-bottom: 15px;">
  <a class="btn btn-default" href="{{ url_for('patient') }}">← Zur Patientenliste</a>

  <form method="post"
        action="{{ url_for('patient_deaktivieren', patienten_id=patient.patienten_id) }}"
        style="display:inline;">
    <button class="btn btn-danger"
            onclick="return confirm('Willst du diese Person wirklich deaktivieren?');">
      Patient:in deaktivieren
    </button>
  </form>
</div>
{% endblock %}
